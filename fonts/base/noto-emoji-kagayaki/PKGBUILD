# Maintainer: julroy67 <julroy67@gmail.com>
# Contributor: Antonio Rojas <arojas@archlinux.org>
# Contributor: bohoomil <@zoho.com>

pkgname=noto-emoji-kagayaki
pkgver=2.001
_commit=8a6530b7b26e8c5ee7b177a1388d492bbcaf4319
pkgrel=1
pkgdesc="Google Noto emoji fonts"
arch=('any')
url="https://www.google.com/get/noto/"
license=('custom:OFL')
depends=('fontconfig' 'xorg-fonts-encodings' 'xorg-mkfontscale' 'xorg-mkfontdir')
conflicts=('ttf-noto-emoji-kagayaki' 'noto-fonts-emoji')
source=("https://github.com/googlei18n/noto-emoji/archive/$_commit.zip"
        41-noto-emoji.conf)
sha256sums=('eef8620340f8f229772fd215282b08273685b416b910698b8979f3c21b5b653b'
            'c640e5b5538e7f04f15aba75a78d99fcc4d98e7b51699df6c659d1237e9940fb')

package() {
	cd "noto-emoji-${_commit}/fonts"

	# Install font
	install -m755 -d "${pkgdir}"/usr/share/fonts/kagayaki/"${pkgname}"
	install -m644 NotoColorEmoji.ttf \
		"${pkgdir}"/usr/share/fonts/kagayaki/"${pkgname}"
	
	# License
	install -Dm644 "LICENSE" \
		"${pkgdir}"/usr/share/licenses/"${pkgname}"/COPYING

	# Install infinality conf
	cd "${srcdir}"
	install -m755 -d "${pkgdir}"/etc/fonts/conf.d
	install -m755 -d "${pkgdir}"/etc/fonts/conf.avail
	install -m644 41-noto-emoji.conf \
		"${pkgdir}"/etc/fonts/conf.avail/41-noto-emoji.conf

	cd "${pkgdir}"/etc/fonts/conf.d
	ln -s ../conf.avail/41-noto-emoji.conf .
}
