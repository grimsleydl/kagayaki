# Maintainer: Julien Humbert <julroy67@gmail.com>
# Contributor: Iru Cai <mytbk920423@gmail.com>

pkgname=otf-fandol-kagayaki
pkgver=0.3
pkgrel=1
pkgdesc="Basic fonts for Chinese typesetting"
arch=('any')
url="http://www.ctan.org/pkg/fandol"
license=('GPL3')
depends=('fontconfig' 'xorg-fonts-encodings' 'xorg-mkfontscale' 'xorg-mkfontdir')
source=("http://mirrors.ctan.org/fonts/fandol.zip"
        40-fandol.conf)
sha256sums=('9278f01b417ded5766d98c3937192a1a6a2c73a5e94a3493fdfc932b2a55005a'
            '6c0caffbfe85fa108cf90e31d181e773b91452d52403715e0aab965a3264efd5')

package() {
	cd "${srcdir}"

    # Install font
	install -m755 -d "${pkgdir}"/usr/share/fonts/kagayaki/"${pkgname}"
    install -m644 fandol/FandolSong*.otf \
        "${pkgdir}"/usr/share/fonts/kagayaki/"${pkgname}"
	install -m644 fandol/FandolHei*.otf \
        "${pkgdir}"/usr/share/fonts/kagayaki/"${pkgname}"
	install -m644 fandol/FandolKai*.otf \
        "${pkgdir}"/usr/share/fonts/kagayaki/"${pkgname}"

    # Install infinality conf
	install -m755 -d "${pkgdir}"/etc/fonts/conf.d
	install -m755 -d "${pkgdir}"/etc/fonts/conf.avail
	install -m644 40-fandol.conf \
		"${pkgdir}"/etc/fonts/conf.avail/40-fandol.conf

	cd "${pkgdir}"/etc/fonts/conf.d
	ln -s ../conf.avail/40-fandol.conf .
}
